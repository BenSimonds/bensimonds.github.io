<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">

  
  <title>Open Shading Language Experiment</title>
  <link rel="canonical" href="http://bensimonds.com/2014/01/07/open-shading-language-experiment/">
  
  <meta name="description" content="I’ve been trying to learn a bit about writing OSL shaders the past couple of days, and I’m finding it pretty interesting. So far I’ve just learned a b">
  
  
  <meta name="author" content="Ben Simonds">
  
  <meta property="og:image" content="http://bensimonds.comundefined">
  
  <meta property="og:site_name" content="Ben Simonds&#39; Personal Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Open Shading Language Experiment" />
  
  <meta property="og:description" content="I’ve been trying to learn a bit about writing OSL shaders the past couple of days, and I’m finding it pretty interesting. So far I’ve just learned a b">
  
  <meta property="og:url" content="http://bensimonds.com/2014/01/07/open-shading-language-experiment/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Open Shading Language Experiment">
  
  <meta name="twitter:description" content="I’ve been trying to learn a bit about writing OSL shaders the past couple of days, and I’m finding it pretty interesting. So far I’ve just learned a b">
  
  
  <meta name="twitter:image" content="http://bensimonds.comundefined">
  
  <meta name="twitter:url" content="http://bensimonds.com/2014/01/07/open-shading-language-experiment/" />

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/base.css">

  
  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="container">

    <header>
  <!-- Title -->
  <a href="" style="text-decoration: none;">
  <h1>
    BenSimonds.com
  </h1>
  </a>

  <!-- Site Banner Image -->
  <a href="/">
  <img id="siteBanner" class="banner" src="/images/banner-warehouse-1.png" />
  </a>
  <script>
    var images = [
      "/images/banner-fractal.png",
      "/images/banner-temple.png",
      "/images/banner-spiderbot.png",
      "/images/banner-pirate.jpg",
      "/images/banner-warehouse-3.png",
      "/images/banner-warehouse-2.png",
      "/images/banner-warehouse-1.png"
    ];
    var randomNum = Math.floor(Math.random() * images.length);
    document.getElementById("siteBanner").src = images[randomNum];
  </script>

  <!-- Navbar -->
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      
        <li><a href="/blender">Blender</a></li>
        
    </ul>
  </nav>
  <hr/>
</header>


    


    <h2>Open Shading Language Experiment</h2>
  
  
  <p>I’ve been trying to learn a bit about writing OSL shaders the past couple of days, and I’m finding it pretty interesting. So far I’ve just learned a bit about what osl can do and how to put together a basic shader. Here’s one of my first attempts - a procedural dirt shader based on the trace function. It’s pretty much just an ambient occlusion pass that you can use as a mask for other materials, but what’s nice about it is that it’s completely dynamic: no baking, no vertex paint etc. Here’s what it looks like:</p>
<p><img src="/images/old/proceduraldirt.jpg?w=606" alt="ProceduralDirt &gt;&lt;"></p>
<p>And here’s the shader code: </p>
<pre><code>shader tracetest(
    normal Normal = N,
    float Distance = 10,
    float NoiseFactor = 0.5,
    float NoiseScale = 100,
    output float TraceRandom = 0.0)

&#123;
    normal NewNorm = Normal;
    // Create a randomised normal to trace with.
    vector RandomVec = vector(0,0,0);
    vector NormalVec = transform(&quot;common&quot;, N);
    RandomVec = NormalVec + (NoiseFactor * noise(&quot;perlin&quot;, P * NoiseScale));
    RandomVec = normalize(RandomVec);
    int Hit2 = trace(P, RandomVec, &quot;maxdist&quot;, Distance);
    if (Hit2) &#123;
        float Dist = 0.0;
        // Get the hit distance:
        int HitTrace = getmessage(&quot;trace&quot;, &quot;hitdist&quot;, Dist);
        // Turn Hit Distance into output:
        float Grad = 1 - Dist/Distance;
        TraceRandom = pow(Grad,2);
        &#125;
&#125;
</code></pre>
<p>Edit: Here’s a screenshot of the node setup.</p>
<p><a href="/images/old/screen-shot-2014-01-07-at-19-01-34.png"><img src="/images/old/screen-shot-2014-01-07-at-19-01-34.png?w=950" alt="Screen Shot 2014-01-07 at 19.01.34 &gt;&lt;"></a></p>
<h1 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h1><p>playway (Jan 22, 2014)</p>
<blockquote>
<p>Really impresses with all of your work so far Ben. I am thinking of buying a new computer. Can you tell me what are your system specs and what do you recommend?</p>
<p>Thanx!</p>
</blockquote>
<p>Noel (Apr 04, 2014)</p>
<blockquote>
<p>What resources are you using to learn OSL?</p>
</blockquote>
<p>Spirou4D (Jan 08, 2014)</p>
<blockquote>
<p>Good!<br>Congratulations.</p>
</blockquote>
<p>playway (Jan 23, 2014)</p>
<blockquote>
<p>Ah, I see. Thanx for helping me out! A little professional advice is always helpful:)</p>
<p>Good luck for your future projects and have a nice day!</p>
</blockquote>
<p>Ben Simonds (Jan 23, 2014)</p>
<blockquote>
<p>Hi Playway</p>
<p>I’m using a 2011 iMac for my work. 8GB Ram, Quad Core processor. The most important hardware specs for blender are RAM (for handling large scenes) and CPU power (for rendering). GPU is obviously usefull as well, particularly if you want to use it for rendering. I’d advise having a quad core machine with at least 8GB of ram but the rest I’m not too up to date on…</p>
</blockquote>
<p>Spirou4D (Jan 07, 2014)</p>
<blockquote>
<p>Thks a lot Ben,</p>
<p>And all my best Greetinsg for this new year 2014.<br>Could you add a screenview of the node’s setup, please.<br>Bye bye<br>SPirou4D</p>
</blockquote>
<p>Ben Simonds (Jan 07, 2014)</p>
<blockquote>
<p>Added! Thanks SPirou4D</p>
</blockquote>
<p>Ben Simonds (Apr 04, 2014)</p>
<blockquote>
<p>Mainly Thomas Dinges’ site, OpenShading.com, and the OSL Specification. You can find the latter at <a target="_blank" rel="noopener" href="https://code.google.com/p/openshadinglanguage/">https://code.google.com/p/openshadinglanguage/</a></p>
</blockquote>
<p>Roberto Locatelli (Aug 15, 2015)</p>
<blockquote>
<p>So compact script and so impressive result!</p>
</blockquote>
<p>Lynchon (Oct 04, 2016)</p>
<blockquote>
<p>Script works perfect, but it takes ages to render. Am i doing something wrong or is just normal when using OSL</p>
</blockquote>
<p>Open Shading Language from Scratch (Ubuntu) &amp;#8211; Digital Box (Dec 27, 2018)</p>
<blockquote>
<p>[&amp;#8230;] Open Shading Language experiment [&amp;#8230;]</p>
</blockquote>

  <p><a class="classtest-link" href="/tags/blender/" rel="tag">blender</a>, <a class="classtest-link" href="/tags/code/" rel="tag">code</a>, <a class="classtest-link" href="/tags/cycles/" rel="tag">cycles</a>, <a class="classtest-link" href="/tags/dirt-shader/" rel="tag">dirt shader</a>, <a class="classtest-link" href="/tags/open-shader-language/" rel="tag">open shader language</a>, <a class="classtest-link" href="/tags/open-shading/" rel="tag">open shading</a>, <a class="classtest-link" href="/tags/osl/" rel="tag">osl</a>, <a class="classtest-link" href="/tags/procedural-dirt/" rel="tag">procedural dirt</a>, <a class="classtest-link" href="/tags/quick-projects/" rel="tag">quick projects</a>, <a class="classtest-link" href="/tags/shader/" rel="tag">shader</a> — Jan 7, 2014</p>
  
  <br/>
  
  
  
  
    <footer>
    <p style="text-align: center;"> Ben Simonds 2023 </p>
    <ul>
        <li>
            <a href="https://www.linkedin.com/in/bensimonds/" target="_blank" style="text-decoration: none" rel="noreferrer"
                aria-label="LinkedIn">
                <svg class="icon"  width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <title>LinkedIn</title>
                    <path
                        d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                </svg>
            </a>
        </li>
        <li>
            <a href="https://github.com/bensimonds" target="_blank" rel="noreferrer"
                aria-label="GitHub">
                <svg class="icon" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <title>GitHub</title>
                    <path
                        d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
                </svg>
            </a>
        </li>
    </ul>
<footer>

</body>
</html>
