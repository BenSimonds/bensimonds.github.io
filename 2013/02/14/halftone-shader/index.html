<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">

  
  <title>Halftone Shader</title>
  <link rel="canonical" href="http://bensimonds.com/2013/02/14/halftone-shader/">
  
  <meta name="description" content="Just want the blend? Skip to the end. This is something I made for work recently and have since been playing around with. It’s pretty fun, so I though">
  
  
  <meta name="author" content="Ben Simonds">
  
  <meta property="og:image" content="http://bensimonds.comundefined">
  
  <meta property="og:site_name" content="Ben Simonds&#39; Personal Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Halftone Shader" />
  
  <meta property="og:description" content="Just want the blend? Skip to the end. This is something I made for work recently and have since been playing around with. It’s pretty fun, so I though">
  
  <meta property="og:url" content="http://bensimonds.com/2013/02/14/halftone-shader/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Halftone Shader">
  
  <meta name="twitter:description" content="Just want the blend? Skip to the end. This is something I made for work recently and have since been playing around with. It’s pretty fun, so I though">
  
  
  <meta name="twitter:image" content="http://bensimonds.comundefined">
  
  <meta name="twitter:url" content="http://bensimonds.com/2013/02/14/halftone-shader/" />

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/base.css">

  
  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="container">

    <header>
  <!-- Title -->
  <div style="display:flex; flex-wrap: wrap; flex-direction:row; width: 100%; align-items: baseline; margin-bottom: -15px;">
    <h1 style="margin-bottom: 0px;">
      <a tyle="text-decoration: none;">
        BenSimonds.com
      </a>
    </h1>
    <a style=" margin-left: auto; font-size: 0.8rem;" id="siteBannerLink" href="/2011/10/13/abandoned-power-station/">Abandoned Power Station</a>
  </div>
  <!-- Site Banner Image -->

  <a href="/">
    <img id="siteBanner" class="banner" src="/images/banner-warehouse-1.png" />
  </a>

  <script>
    var banners = [
      { imgUrl: "/images/banner-fractal.png", title: "Fun with Instancing In Cycles", url: "/2012/07/04/fun-with-instancing-in-cycles/" },
      { imgUrl: "/images/banner-temple.png", title: "Blender Masterclass", url: "/2013/01/04/blender-master-class-a-hands-on-guide-to-modeling-sculpting-materials-and-rendering/" },
      { imgUrl: "/images/banner-spiderbot.png", title: "Blender Masterclass", url: "/2013/01/04/blender-master-class-a-hands-on-guide-to-modeling-sculpting-materials-and-rendering/" },
      { imgUrl: "/images/banner-pirate.jpg", title: "Blending Life 2010", url: "/2010/02/24/blending-life-2010" },
      { imgUrl: "/images/banner-warehouse-3.png", title: "Abandoned Power Station", url: "/2011/10/13/abandoned-power-station/" },
      { imgUrl: "/images/banner-warehouse-2.png", title: "Abandoned Power Station", url: "/2011/10/13/abandoned-power-station/" },
      { imgUrl: "/images/banner-warehouse-1.png", title: "Abandoned Power Station", url: "/2011/10/13/abandoned-power-station/" },
      { imgUrl: "/images/banner-circle-packing.png", title: "Mitchell's Best Candidate Algorithm", url: "/2023/02/22/circle-packing/" },
      { imgUrl: "/images/banner-perlin-snakes.png", title: "Perlin Snakes", url: "/2023/02/19/perlin-snakes/" },
      { imgUrl: "/images/banner-kumiko.svg", title: "Kumiko Grids", url: "/2023/02/28/kumiko-grids/" },
    ];
    var randomNum = Math.floor(Math.random() * banners.length);
    document.getElementById("siteBanner").src = banners[randomNum].imgUrl;
    document.getElementById("siteBannerLink").href = banners[randomNum].url;
    document.getElementById("siteBannerLink").textContent = banners[randomNum].title;

  </script>

  <!-- Navbar -->
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      
        <li><a href="/blender">Blender</a></li>
        
    </ul>
  </nav>
  <hr />
</header>


    


    <h2>Halftone Shader</h2>
  
  
  <p><img src="/images/old/sunsethalftone.jpg" alt="SunsetHalftone &gt;&lt;"></p>
<p>Just want the blend? Skip to the end. This is something I made for work recently and have since been playing around with. It’s pretty fun, so I thought I’d share it with you. It started life as a node setup for rendering images or video as a halftone pattern, similar to how images in a newspaper look when viewed close up. It was an interesting challenge as it required mimicking the CMYK colours used in traditional printing. To do this the input image has to be converted to CMYK values, and then further manipulated to create the halftone pattern. A halftone pattern basically uses small dots of fixed colours (in this case cyan, magenta, yellow, and black) and varying sizes to create the illusion of smooth colours. The image below shows a halftone pattern close up (from wikipedia). </p>
<p><img src="/images/old/halftone_pattern.png" alt="Halftone_Pattern &gt;&lt;"></p>
<p>The eventual node group I created to mimic the effect looks like this (click to view full): </p>
<p><a href="/images/old/halftonesetup1.jpg"><img src="/images/old/halftonesetup1.jpg?w=950" alt="HalftoneSetup &gt;&lt;"></a></p>
<p>It a bit of a birds nest, but it works pretty simply overall. The CMYK colour conversion uses the following formula:</p>
<p><a href="/images/old/eqns.jpg"><img src="/images/old/eqns.jpg?w=470" alt="&gt;&lt; &gt;&lt;"></a></p>
<p>Here R, G and B are the RGB values, C, M, Y, and K are the CMYK values, and c, m, and y are some intermediate values that make the stages in converting between the two a little clearer. The tangle of nodes labeled 1 and 2 in the image above are just applying these formulae with a bunch of math nodes. (It’s worth noting here that this isn’t the most accurate conversion in the world, there’s no fancy colour management going on here, but it’s sufficient for creating a cool retro looking shader.) The lower half of the node setup then creates a set of four halftone patterns, each at slightly different orientations so that they don’t overlap. This is done simply by tiling the image below a whole bunch (you’ll notice it isn’t a dot but a gradient, I’ll explain why below). The dot starts as a linear spherical gradient that I created in GIMP, but I manipulate it a bit by taking the square root of the value (the <em>Power</em> node in part 3 of the node setup). This is because we want the area of the halftone dots (and thus the amount of “ink”) to be proportional to the value of the input, and because area is proportional to radius squared, the value of the gradient should be proportional to the square root of the distance from the centre. I also invert the result, otherwise we’d get dot’s with no ink on an inky background, rather than the opposite.</p>
<p><img src="/images/old/halftonedot.jpg" alt="HalfToneDot &gt;&lt;"></p>
<p>Then to generate dots of the correct size, I use math nodes with the <em>Greater Than</em> operation to compare the value of the dot gradients pattern with the CMYK values. Thus where the input value is greater the node outputs a larger dot, because the input stays greater than the dot value for longer. This yeilds the dot pattern for each colour individually. Then I just multiply each of these together to yield the final CMYK composite.</p>
<p><a href="/images/old/combine.jpg"><img src="/images/old/combine.jpg?w=950" alt="combine &gt;&lt;"></a></p>
<p>That basically covers the node setup. The node group itself then just takes a colour input for the texture to be converted, and a vector input for the texture coordinates to apply the dots to, plus some extra values that I can use to tweak the result, for example to slightly adjust the dot size or the amount of saturation in the output. I can then use this node setup in all sorts of different materials. I actually created two different node groups with pretty much the same layout, one for cycles and one for blender internal. The main use of these is obviously in creating fake halftone images as originally intended: just use a shadeless material with the the texture to be converted as the input, and the output is the halftoned version of the image, as seen above. One cool thing you can do with Blender Internal (that I don’t think is possible with cycles) is to use the shading of a material as the input for the halftone node group. This will then convert rendered shadows into an NPR style halftone shader (shown below on the happy buddha from the Stanford 3D scan repository, with a little edge rendering over the top). </p>
<p><a href="/images/old/cmyk1.jpg"><img src="/images/old/cmyk1.jpg?w=633" alt="CMYK1 &gt;&lt;"></a></p>
<p>It’s also fun to play around with the input for the halftone texture. Whilst a gradient yeilds the classic halftone dots, you can create some cool effects using different textures. Here’s an my pirate captain character from a few years ago, using a Band Noise Wood texture as the halftone texture (click to view ful size).</p>
<p><a href="/images/old/cmky2.jpg"><img src="/images/old/cmky2.jpg?w=684" alt="CMKY2 &gt;&lt;"></a></p>
<p>Here is a photo by photographer <a target="_blank" rel="noopener" href="http://www.flickr.com/photos/vonderauvisuals/7317092448/">vonderauvisuals </a>on flickr (CC-BY) that I experimented with some other textures on. In the first I used a bunch of numbers slightly blurred out. For the second I used the image itself as the halftone pattern, giving a pretty cool recursive result (again, view full size for best experience). You’ll notice on the latter that you actually get some of the detail of the original image showing through. It isn’t apparent with the dots (which aren’t actually perfect dots but are a bit wobbly) but the node setup doesn’t really scale the input pattern up or down, it just does a sort of threshold operation.</p>
<p><a href="/images/old/cmykhalftones.jpg"><img src="/images/old/cmykhalftones.jpg?w=950" alt="CMYKHalftones &gt;&lt;"></a></p>
<p>Anyway, you can download the blend and mess around with it for yourself. let me know if you make anything cool! <a target="_blank" rel="noopener" href="http://www.blendswap.com/blends/view/66588">Halftone Shader </a> on Blendswap</p>
<h1 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h1><p>Cosi (Apr 15, 2013)</p>
<blockquote>
<p>WoW! Some days ago I looked for a filter like this for After Effects, without finding anything free or working. I’m amazed now to find it now and being so f****ng cool. Thanks a lot, Ben.</p>
</blockquote>
<p>Tobiasz Unfa Karoń (Oct 24, 2014)</p>
<blockquote>
<p>I’m  blown away by your creativity and ideas!<br>This is a great artistic tool to have around.</p>
</blockquote>
<p>Yoana España Urresty (Mar 08, 2019)</p>
<blockquote>
<p>Download the shader<br>But it doesn´t work when I add it to another object, do you have any tutorials?</p>
</blockquote>

  <p><a class="classtest-link" href="/tags/cmyk/" rel="tag">cmyk</a>, <a class="classtest-link" href="/tags/halftone/" rel="tag">halftone</a>, <a class="classtest-link" href="/tags/node-groups/" rel="tag">node groups</a>, <a class="classtest-link" href="/tags/node-setup/" rel="tag">node setup</a>, <a class="classtest-link" href="/tags/print/" rel="tag">print</a>, <a class="classtest-link" href="/tags/resources/" rel="tag">resources</a>, <a class="classtest-link" href="/tags/retro/" rel="tag">retro</a>, <a class="classtest-link" href="/tags/shader/" rel="tag">shader</a>, <a class="classtest-link" href="/tags/technical/" rel="tag">technical</a>, <a class="classtest-link" href="/tags/tutorials/" rel="tag">tutorials</a> — Feb 14, 2013</p>
  
  <br/>
  
  
  
  
    <footer>
    <p style="text-align: center;"> Ben Simonds 2023 </p>
    <ul>
        <li>
            <a href="https://www.linkedin.com/in/bensimonds/" target="_blank" style="text-decoration: none" rel="noreferrer"
                aria-label="LinkedIn">
                <svg class="icon"  width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <title>LinkedIn</title>
                    <path
                        d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                </svg>
            </a>
        </li>
        <li>
            <a href="https://github.com/bensimonds" target="_blank" rel="noreferrer"
                aria-label="GitHub">
                <svg class="icon" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <title>GitHub</title>
                    <path
                        d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
                </svg>
            </a>
        </li>
    </ul>
<footer>

</body>
</html>
